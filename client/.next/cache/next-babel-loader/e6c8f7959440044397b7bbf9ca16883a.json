{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport * as types from \"../types\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\"; //login user\n\nexport var login = function login(_ref) {\n  var email = _ref.email,\n      password = _ref.password;\n  return function (dispatch) {\n    var config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    var body = {\n      email: email,\n      password: password\n    };\n\n    try {\n      axios.post(\"http://localhost:9000/users/login\", body).then(function (res) {\n        dispatch({\n          type: types.LOGIN_USER,\n          payload: res.data\n        });\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    } catch (_unused) {}\n  };\n};\nexport var loadUser = function loadUser() {\n  return function (dispatch) {\n    axios.get(\"http://localhost:9000/users\", tokenConfig()).then(function (res) {\n      dispatch({\n        type: types.USER_LOADED,\n        payload: res.data\n      });\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  };\n}; // setup config/headers and token\n\nexport var tokenConfig = function tokenConfig() {\n  _s();\n\n  // gets token from local storage\n  var token = useSelector(function (state) {\n    return state.auth.token;\n  }); //   const token = getState().auth.token;\n  // headers\n\n  var config = {\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  }; //iff token, add to headers\n\n  if (token) {\n    config.headers[\"x-auth-token\"] = token;\n  }\n\n  return config;\n};\n\n_s(tokenConfig, \"bD5+gKbiITcJRDYAIJK4ZSEgato=\", false, function () {\n  return [useSelector];\n});","map":{"version":3,"sources":["C:/Users/ernes/Desktop/HomProject/gamex/client/store/Actions/authActions.js"],"names":["types","axios","useSelector","login","email","password","dispatch","config","headers","body","post","then","res","type","LOGIN_USER","payload","data","err","console","log","loadUser","get","tokenConfig","USER_LOADED","token","state","auth"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,UAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B,C,CACA;;AAEA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,MAAGC,KAAH,QAAGA,KAAH;AAAA,MAAUC,QAAV,QAAUA,QAAV;AAAA,SAAyB,UAACC,QAAD,EAAc;AAC1D,QAAMC,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AADI,KAAf;AAMA,QAAMC,IAAI,GAAG;AAAEL,MAAAA,KAAK,EAALA,KAAF;AAASC,MAAAA,QAAQ,EAARA;AAAT,KAAb;;AAEA,QAAI;AACFJ,MAAAA,KAAK,CACFS,IADH,CACQ,mCADR,EAC6CD,IAD7C,EAEGE,IAFH,CAEQ,UAACC,GAAD,EAAS;AACbN,QAAAA,QAAQ,CAAC;AACPO,UAAAA,IAAI,EAAEb,KAAK,CAACc,UADL;AAEPC,UAAAA,OAAO,EAAEH,GAAG,CAACI;AAFN,SAAD,CAAR;AAID,OAPH,WAQS,UAACC,GAAD,EAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,OAVH;AAWD,KAZD,CAYE,gBAAM,CAAE;AACX,GAtBoB;AAAA,CAAd;AAwBP,OAAO,IAAMG,QAAQ,GAAG,SAAXA,QAAW;AAAA,SAAM,UAACd,QAAD,EAAc;AAC1CL,IAAAA,KAAK,CACFoB,GADH,CACO,6BADP,EACsCC,WAAW,EADjD,EAEGX,IAFH,CAEQ,UAACC,GAAD,EAAS;AACbN,MAAAA,QAAQ,CAAC;AACPO,QAAAA,IAAI,EAAEb,KAAK,CAACuB,WADL;AAEPR,QAAAA,OAAO,EAAEH,GAAG,CAACI;AAFN,OAAD,CAAR;AAID,KAPH,WAQS,UAACC,GAAD,EAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KAVH;AAWD,GAZuB;AAAA,CAAjB,C,CAaP;;AACA,OAAO,IAAMK,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA;;AAC/B;AAEA,MAAME,KAAK,GAAGtB,WAAW,CAAC,UAACuB,KAAD;AAAA,WAAWA,KAAK,CAACC,IAAN,CAAWF,KAAtB;AAAA,GAAD,CAAzB,CAH+B,CAI/B;AAEA;;AACA,MAAMjB,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf,CAP+B,CAa/B;;AACA,MAAIgB,KAAJ,EAAW;AACTjB,IAAAA,MAAM,CAACC,OAAP,CAAe,cAAf,IAAiCgB,KAAjC;AACD;;AACD,SAAOjB,MAAP;AACD,CAlBM;;GAAMe,W;UAGGpB,W","sourcesContent":["import * as types from \"../types\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\n//login user\r\n\r\nexport const login = ({ email, password }) => (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const body = { email, password };\r\n\r\n  try {\r\n    axios\r\n      .post(\"http://localhost:9000/users/login\", body)\r\n      .then((res) => {\r\n        dispatch({\r\n          type: types.LOGIN_USER,\r\n          payload: res.data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  } catch {}\r\n};\r\n\r\nexport const loadUser = () => (dispatch) => {\r\n  axios\r\n    .get(\"http://localhost:9000/users\", tokenConfig())\r\n    .then((res) => {\r\n      dispatch({\r\n        type: types.USER_LOADED,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n// setup config/headers and token\r\nexport const tokenConfig = () => {\r\n  // gets token from local storage\r\n\r\n  const token = useSelector((state) => state.auth.token);\r\n  //   const token = getState().auth.token;\r\n\r\n  // headers\r\n  const config = {\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  //iff token, add to headers\r\n  if (token) {\r\n    config.headers[\"x-auth-token\"] = token;\r\n  }\r\n  return config;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}