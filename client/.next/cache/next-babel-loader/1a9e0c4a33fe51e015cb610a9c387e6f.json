{"ast":null,"code":"import * as types from \"../types\";\nimport axios from \"axios\";\nexport const attack = ({\n  userId,\n  health,\n  enemyDamage\n}) => async dispatch => {\n  const body = {\n    userId,\n    health,\n    enemyDamage\n  };\n  await axios.get(\"http://localhost:9000/users\", tokenConfig(getState)).then(res => {\n    dispatch({\n      type: types.USER_LOADED,\n      payload: res.data\n    });\n  }).then(() => {\n    axios.put(`http://localhost:9000/users/attack/${body.userId}`, body).then(res => {\n      dispatch({\n        type: types.USER_UPDATES_HEALTH,\n        payload: res.data\n      });\n    }).then(() => {\n      axios.get(`http://localhost:9000/users/attack/${body.userId}`).then(res => {\n        dispatch({\n          type: types.USER_DATA_AFTER_ATTACK,\n          payload: res.data\n        });\n      });\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const spawnEnemy = enemyID => async dispatch => {\n  const body = {\n    enemyID\n  };\n  await axios.get(`http://localhost:9000/enemies/spawn/${body.enemyID}`, body).then(res => {\n    dispatch({\n      type: types.ENEMY_SPAWNED,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const getWeather = () => async dispatch => {\n  await axios.get(`http://api.openweathermap.org/data/2.5/weather?id=598098&appid=b5516378bf01a1077c5f71323ba950ac&units=metric`).then(res => {\n    dispatch({\n      type: types.GET_WEATHER,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const wonBattle = ({\n  enemyID,\n  userId\n}) => async dispatch => {\n  const body = {\n    enemyID,\n    userId\n  };\n  await axios.put(`http://localhost:9000/users/won/${body.userId}`, body).then(res => {\n    dispatch({\n      type: types.NEW_STATS_AFTER_BATTLE,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n}; // setup config/headers and token\n\nexport const tokenConfig = () => {\n  const cookie = new Cookies();\n  const token = cookie.get(\"token\"); // headers\n\n  const config = {\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  }; //iff token, add to headers\n\n  if (token) {\n    config.headers[\"x-auth-token\"] = token;\n  }\n\n  return config;\n};","map":{"version":3,"sources":["C:/Users/ernes/Desktop/HomProject/gamex/client/store/Actions/userActions.js"],"names":["types","axios","attack","userId","health","enemyDamage","dispatch","body","get","tokenConfig","getState","then","res","type","USER_LOADED","payload","data","put","USER_UPDATES_HEALTH","USER_DATA_AFTER_ATTACK","catch","err","console","log","spawnEnemy","enemyID","ENEMY_SPAWNED","getWeather","GET_WEATHER","wonBattle","NEW_STATS_AFTER_BATTLE","cookie","Cookies","token","config","headers"],"mappings":"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","sourcesContent":["import * as types from \"../types\";\r\nimport axios from \"axios\";\r\n\r\nexport const attack = ({ userId, health, enemyDamage }) => async (dispatch) => {\r\n  const body = {\r\n    userId,\r\n    health,\r\n    enemyDamage,\r\n  };\r\n  await axios\r\n  .get(\"http://localhost:9000/users\", tokenConfig(getState))\r\n  .then((res) => {\r\n    dispatch({\r\n      type: types.USER_LOADED,\r\n      payload: res.data,\r\n    });\r\n  })\r\n  .then(() => {\r\n     axios\r\n    .put(`http://localhost:9000/users/attack/${body.userId}`, body)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: types.USER_UPDATES_HEALTH,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .then(() => {\r\n      axios\r\n        .get(`http://localhost:9000/users/attack/${body.userId}`)\r\n        .then((res) => {\r\n          dispatch({\r\n            type: types.USER_DATA_AFTER_ATTACK,\r\n            payload: res.data,\r\n          });\r\n        });\r\n    })\r\n  })\r\n  \r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const spawnEnemy = (enemyID) => async (dispatch) => {\r\n  const body = {\r\n    enemyID,\r\n  };\r\n  await axios\r\n    .get(`http://localhost:9000/enemies/spawn/${body.enemyID}`, body)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: types.ENEMY_SPAWNED,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const getWeather = () => async (dispatch) => {\r\n  await axios\r\n    .get(\r\n      `http://api.openweathermap.org/data/2.5/weather?id=598098&appid=b5516378bf01a1077c5f71323ba950ac&units=metric`\r\n    )\r\n    .then((res) => {\r\n      dispatch({\r\n        type: types.GET_WEATHER,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const wonBattle = ({enemyID, userId}) => async (dispatch) => {\r\n  const body = {\r\n    enemyID,\r\n    userId,\r\n  };\r\n  await axios\r\n    .put(`http://localhost:9000/users/won/${body.userId}`, body)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: types.NEW_STATS_AFTER_BATTLE,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n// setup config/headers and token\r\nexport const tokenConfig = () => {\r\n  const cookie = new Cookies();\r\n\r\n  const token = cookie.get(\"token\");\r\n\r\n  // headers\r\n  const config = {\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  //iff token, add to headers\r\n  if (token) {\r\n    config.headers[\"x-auth-token\"] = token;\r\n  }\r\n  return config;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}